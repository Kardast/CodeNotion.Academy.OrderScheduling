<main>
  <div>
    <p>Search an Order</p>
    <div class="filtersWrapper">
      <div class="filter">
        <mat-form-field class="example-full-width">
          <mat-label>Search by customer</mat-label>
          <input type="text" matInput [(ngModel)]="searchCustomer" placeholder="Write..."
            (keyup)="searchCustomerKeyUp()">
        </mat-form-field>
      </div>
      <div class="filter">
        <mat-form-field class="example-full-width">
          <mat-label>Search by order number</mat-label>
          <input type="text" matInput [(ngModel)]="searchOrderNumber" placeholder="Write..."
            (keyup)="searchOrderNumberKeyUp()">
        </mat-form-field>
      </div>
    </div>
  </div>

  <form [formGroup]="orderForm" (ngSubmit)="onSubmit()">
    <p>Create a new Order</p>
    <!-- <mat-form-field class="formInput" *ngFor="let column of columnsToDisplay.slice(1,3); let i = index">
      <mat-label>{{column}}</mat-label>
      <input matInput type="text" formControlName="{{column}}">
    </mat-form-field>

    <mat-form-field class="formInput" *ngFor="let column of columnsToDisplay.slice(3); let i = index">
      <mat-label>{{column}}</mat-label>
      <input type="date" matInput [matDatepicker]="orderDates" formControlName="{{column}}">
      <mat-datepicker-toggle matSuffix [for]="orderDates"></mat-datepicker-toggle>
      <mat-datepicker #orderDates></mat-datepicker>
    </mat-form-field> -->

    <mat-form-field class="margin example-full-width formInput">
      <mat-label>customer</mat-label>
      <input matInput type="text" formControlName="customer">
    </mat-form-field>

    <mat-form-field class="margin example-full-width formInput">
      <mat-label>orderNumber</mat-label>
      <input matInput type="text" formControlName="orderNumber">
    </mat-form-field>

    <mat-form-field class="margin example-full-width formInput">
      <mat-label>cuttingDate</mat-label>
      <input matInput [matDatepicker]="pickerCuttingDate" type="date" formControlName="cuttingDate">
      <mat-datepicker #pickerCuttingDate></mat-datepicker>
      <mat-datepicker-toggle matSuffix [for]="pickerCuttingDate"></mat-datepicker-toggle>
    </mat-form-field>

    <mat-form-field class="margin example-full-width formInput">
      <mat-label>preparationDate</mat-label>
      <input matInput [matDatepicker]="pickerPreparationDate" type="date" formControlName="preparationDate">
      <mat-datepicker #pickerPreparationDate></mat-datepicker>
      <mat-datepicker-toggle matSuffix [for]="pickerPreparationDate"></mat-datepicker-toggle>
    </mat-form-field>

    <mat-form-field class="margin example-full-width formInput">
      <mat-label>bendingDate</mat-label>
      <input matInput [matDatepicker]="pickerBendingDate" type="date" formControlName="bendingDate">
      <mat-datepicker #pickerBendingDate></mat-datepicker>
      <mat-datepicker-toggle matSuffix [for]="pickerBendingDate"></mat-datepicker-toggle>
    </mat-form-field>

    <mat-form-field class="margin example-full-width formInput">
      <mat-label>assemblyDate</mat-label>
      <input matInput [matDatepicker]="pickerAssemblyDate" type="date" formControlName="assemblyDate">
      <mat-datepicker #pickerAssemblyDate></mat-datepicker>
      <mat-datepicker-toggle matSuffix [for]="pickerAssemblyDate"></mat-datepicker-toggle>
    </mat-form-field>

    <div class="example-button-row">
      <button color="primary" mat-raised-button type="submit">Submit</button>
    </div>
  </form>

  <table class="ordersTable" mat-table [dataSource]="orders$">

    <!-- <ng-container *ngFor="let column of columnsToDisplay" matColumnDef="{{column}}">
      <th mat-header-cell *matHeaderCellDef>{{column}}</th>
      <td class="orderRow" mat-cell *matCellDef="let listOrder" (click)="fillUpdateForm(listOrder)">{{listOrder[column]}}</td>
    </ng-container>
    <ng-container matColumnDef="delete">
      <th mat-header-cell *matHeaderCellDef>delete</th>
      <td class="orderRow" mat-cell *matCellDef="let listOrder">
        <button mat-icon-button (click)="deleteOrder(listOrder)">
          <mat-icon>delete</mat-icon>*
        </button>
      </td>
    </ng-container> -->

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> Id</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.id}}</td>
    </ng-container>

    <ng-container matColumnDef="customer">
      <th mat-header-cell *matHeaderCellDef> customer</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.customer}}</td>
    </ng-container>

    <ng-container matColumnDef="orderNumber">
      <th mat-header-cell *matHeaderCellDef> orderNumber</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.orderNumber}}</td>
    </ng-container>

    <ng-container matColumnDef="cuttingDate">
      <th mat-header-cell *matHeaderCellDef> cuttingDate</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.cuttingDate | date}}</td>
    </ng-container>

    <ng-container matColumnDef="preparationDate">
      <th mat-header-cell *matHeaderCellDef> preparationDate</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.preparationDate | date}}</td>
    </ng-container>

    <ng-container matColumnDef="bendingDate">
      <th mat-header-cell *matHeaderCellDef> bendingDate</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.bendingDate | date}}</td>
    </ng-container>

    <ng-container matColumnDef="assemblyDate">
      <th mat-header-cell *matHeaderCellDef> assemblyDate</th>
      <td mat-cell class="table-cell" *matCellDef="let order">{{order.assemblyDate | date}}</td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef> action </th>
      <td mat-cell class="table-cell" *matCellDef="let order">
        <button (click)="deleteOrder(order)" mat-icon-button class="transparent">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let rowOrder; columns: columnsToDisplay" (click)="fillUpdateForm(rowOrder)"></tr>
  </table>
</main>
